<!--
  BCN Quote Modal Launcher - Pure Button Component
  
  RAY'S MODAL: Dedicated component for launching BCN/Quote Adjudication in modal
  This is a pure button element that opens the full interface in a modal window
  
  Trinity Deployment Architect - MVADM-77 Implementation
  Matt's #2 Priority: "Launch from button to see modal" - Ray stressed this is "huge" for him
-->

<template>
    <div class="modal-launcher-container">
        
        <!-- RAY'S MODAL: Pure Launch Button -->
        <button class="modal-launch-button"
                onclick={handleLaunchModal}
                title="Launch BCN/Quote Adjudication in modal"
                aria-label="Launch BCN/Quote Adjudication in modal">
            <span class="button-text">{buttonText}</span>
            <template if:true={shouldShowIcon}>
                <lightning-icon icon-name="utility:new_window"
                               size={iconSize}
                               class="launch-icon"
                               alternative-text="Launch in modal"></lightning-icon>
            </template>
        </button>

        <!-- RAY'S MODAL: Modal Container -->
        <template if:true={showModal}>
            <section role="dialog" 
                     tabindex="-1" 
                     aria-labelledby="modal-heading" 
                     aria-modal="true" 
                     class="slds-modal slds-fade-in-open slds-modal_large">
                <div class="slds-modal__container">
                    
                    <!-- Modal Header with Orange Styling -->
                    <header class="slds-modal__header modal-header-orange">
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" 
                                title="Close" 
                                onclick={handleCloseModal}
                                aria-label="Close modal">
                            <lightning-icon icon-name="utility:close" 
                                           alternative-text="close" 
                                           size="small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>
                        </button>
                        <h2 id="modal-heading" class="slds-modal__title slds-hyphenate">
                            {buttonText}
                        </h2>
                        <template if:true={effectiveRecordId}>
                            <p class="slds-m-top_x-small modal-subtitle">
                                Record ID: {effectiveRecordId}
                            </p>
                        </template>
                    </header>
                    
                    <!-- Modal Body with Tab Container -->
                    <div class="slds-modal__content slds-p-around_none">
                        <template if:true={effectiveRecordId}>
                            <c-bcn-quote-tab-container record-id={effectiveRecordId}></c-bcn-quote-tab-container>
                        </template>
                        <template if:false={effectiveRecordId}>
                            <div class="loading-state">
                                <lightning-spinner alternative-text="Loading..." size="small"></lightning-spinner>
                                <span class="loading-text">Loading case information...</span>
                            </div>
                        </template>
                    </div>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open" onclick={handleBackdropClick}></div>
        </template>
        
    </div>
</template>